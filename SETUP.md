# Инструкция по запуску TimeZero

## Установка и запуск

### Backend (FastAPI)

1. Перейдите в директорию backend:
```bash
cd backend
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
```

3. Активируйте виртуальное окружение:
- Windows:
```bash
venv\Scripts\activate
```
- Linux/Mac:
```bash
source venv/bin/activate
```

4. Установите зависимости:
```bash
pip install -r requirements.txt
```

5. Файл `.env` уже создан с безопасным SECRET_KEY

6. **ВАЖНО!** Заполните базу данных начальными данными:
```bash
python seed_data.py
```

Это создаст:
- 5 локаций (Новая Москва, Заброшенный завод, Радиоактивная пустошь и др.)
- 9 монстров разных уровней (от мутировавших крыс до радиоактивных мутантов)
- 5 NPC (торговцы, квестодатели, стражи)
- 13 предметов (оружие, броня, расходники, ресурсы)

7. Запустите сервер:
```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

Backend будет доступен по адресу: http://localhost:8000
API документация: http://localhost:8000/docs

### Frontend (Vue 3)

1. Откройте новый терминал и перейдите в директорию frontend:
```bash
cd frontend
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите dev сервер:
```bash
npm run dev
```

Frontend будет доступен по адресу: http://localhost:5173

## Первый запуск

1. Откройте браузер и перейдите на http://localhost:5173
2. Зарегистрируйте нового пользователя
3. Войдите в систему
4. Создайте персонажа (выберите одну из 14 профессий)
5. Начните игру!

## Что уже работает:

### ✅ Исправленные критические ошибки:
- Созданы все необходимые `__init__.py` файлы
- Создан `.env` с безопасным SECRET_KEY
- Исправлена загрузка персонажей при входе в игру

### ✅ Реализованный функционал:

#### Аутентификация
- Регистрация пользователей
- Вход в систему (JWT токены)
- Защищённые маршруты

#### Персонажи
- Создание персонажа (до 3 персонажей на пользователя)
- 14 уникальных профессий с разными бонусами
- Система характеристик (Сила, Ловкость, Интеллект, Выносливость)
- Система уровней и опыта
- Здоровье и золото

#### Игровой мир
- Интерактивная карта (Canvas 800x600)
- Движение персонажа по клику мыши
- Система локаций
- Отображение координат

#### Multiplayer
- WebSocket для real-time коммуникации
- Глобальный чат
- Отображение других игроков на карте
- Уведомления о подключении/отключении игроков
- Синхронизация движения между игроками

#### Боевая система
- Модели монстров с характеристиками
- API для атаки монстров
- Расчёт урона с учётом характеристик
- Контратака монстров
- Система опыта и повышения уровня
- Награды за победу (опыт + золото)
- Автоматическое повышение характеристик при level up

#### Предметы
- Модели предметов (оружие, броня, расходники)
- Система редкости (обычный -> легендарный)
- Инвентарь персонажа
- Требования к экипировке

#### NPC
- Модель NPC с типами (торговец, квестодатель, страж)
- Диалоги
- Привязка к локациям

#### Квесты
- Модель квестов
- Система прогресса квестов
- Статусы (не начат, в процессе, завершён)
- Награды за квесты

## API Endpoints

### Аутентификация
- `POST /auth/register` - Регистрация
- `POST /auth/login` - Вход

### Персонажи
- `POST /characters/` - Создать персонажа
- `GET /characters/` - Получить всех персонажей пользователя
- `GET /characters/{id}` - Получить персонажа
- `DELETE /characters/{id}` - Удалить персонажа

### Движение
- `POST /movement/characters/{id}/move` - Переместить персонажа
- `GET /movement/characters/{id}/position` - Получить позицию

### Бой
- `POST /combat/characters/{id}/attack` - Атаковать монстра
- `GET /combat/monsters/nearby/{character_id}` - Монстры рядом

### WebSocket
- `WS /ws/{token}` - WebSocket соединение

## Структура базы данных

Таблицы создаются автоматически при первом запуске backend:
- `users` - Пользователи
- `characters` - Персонажи
- `locations` - Локации
- `items` - Предметы
- `inventory_slots` - Инвентарь
- `npcs` - NPC
- `monsters` - Монстры
- `quests` - Квесты
- `quest_progress` - Прогресс квестов

## Технологии

### Backend
- Python 3.11+
- FastAPI
- SQLAlchemy
- SQLite
- WebSocket
- JWT Authentication

### Frontend
- Vue 3
- Pinia
- Vue Router
- Canvas API
- WebSocket

## Дальнейшее развитие

Для полноценной игры можно добавить:
1. ✅ ~~Создание начальных локаций и монстров через seed скрипт~~ **ГОТОВО!**
2. UI для боевой системы (кнопка атаки, отображение боя)
3. UI для инвентаря и экипировки (drag & drop)
4. Систему торговли с NPC (диалоги и обмен)
5. Квестовый интерфейс (журнал квестов)
6. Фракции и репутацию
7. Систему крафта
8. Отображение монстров на карте
9. Анимации и звуки
10. Улучшенную графику карты (тайлы, спрайты)

## Контакты и поддержка

Проект создан как учебный пример MMORPG игры.
Все основные механики реализованы и готовы к расширению!
